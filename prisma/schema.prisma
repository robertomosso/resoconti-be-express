// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Role {
  superuser
  admin
  user
}

model User {
  id                 String      @id @default(uuid())
  name               String
  email              String      @unique
  password           String
  mustChangePassword Boolean     @default(true)
  fileId             String      // google drive fileId
  role               Role        @default(user)
  // se db vuoto il primo utente sarà superuser, 
  // superuser può aggiungere altri utenti e settarne il ruolo (anche superuser)
  // admin può aggiungere user e vedere la tabella dei resoconti degli utenti
  // user può solo inserire resoconti
  Resoconto          Resoconto[]
}

model Resoconto {
  id                 String   @id @default(uuid())
  dataInizio         String
  dataFine           String
  tipoAttivita       String
  attivita           String
  descrizione        String
  personaRiferimento String
  cliente            String
  colleghiSI         String?
  note               String?
  createdAt          DateTime @default(now())
  userId             String
  user               User     @relation(fields: [userId], references: [id])
}
